# Test方針

## 目的

- 重要な機能が壊れていないことを継続的に保証する
- 仕様変更に対して安全にリファクタできる状態を作る
- バグを再発させない仕組みを作る

## レイヤー（層）について

実装にも関係するが、Core/Service/UIごとに方針や優先度が異なる

### Core

- 最重要
- 実装にも関わるが組み合わせがあるものは全てCoreに定義する
- MockやFakeは使わず、純粋なテストのみ
- Coverageは100%を標準とする

### Service(BE)

- Repositoryや外部依存など、依存先はMockやFakeに差し替える

#### Repository

- DBアクセスが正しいことを確認する

#### API/Controller

- ルーティングやDTO変換を確認する

### UI(FE)

- Widget testができるなら実施する
- E2Eは重要な機能のみを対象とする

## 種類について

テストサイズ(Small/Medium/Large)を採用する

### Small

- 外部依存なしの、メモリ内で完結
- CoreとServiceのほとんど

### Medium

- Repositoryなど、一部の依存
  - 状態として安定しているものだけ
    - 端末やネットワークなどが対象外
    - FWやライブラリも安定しているものとみなすため、ここに含む（Widget testなど）

### Large

- ほとんど実環境
- 重要な導線のみ
